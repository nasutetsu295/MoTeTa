import numpy as np
import cv2 as cv

#image
image = np.array(
    [ [0,0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,0,0],
      [0,0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,0,0],
      [0,0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,0,0],
      [0,0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,0,0],
      [0,0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,0,0],
      [0,0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255, 255,0,0],
      [0,0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255, 255,0,0],
      [0,0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255, 255,0,0],
      [0,0, 255, 255, 255,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0, 255, 255, 255,0,0],
      [0,0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,0,0],
      [0,0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,0,0],
      [0,0, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255, 255,0,0],
      [0,0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,0,0],
      [0,0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,   0,0,0],      
    ],
    dtype = np.uint8
)


contours, hierarchy = cv.findContours(image, cv.RETR_LIST, cv.CHAIN_APPROX_TC89_L1,)


#caculation of S
for i, countor in enumerate(contours):
    
    area = cv.contourArea(countor, True)
    if(area < 0):
        area = area * -1
    
    print(f"面積[{i}]: {area}")


color = cv.cvtColor(image, cv.COLOR_GRAY2BGR)
cv.imshow("image", color)

for moji in contours:
    x, y, w, h = cv.boundingRect(moji)
    red = (0, 0, 255)
    cv.rectangle(color, (x, y), (x+w-1, y+h-1), red, 1)

cv.imwrite('im_test.png',color)
#cv.imshow("image", color)
cv.waitKey(0)
